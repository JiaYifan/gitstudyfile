<!DOCTYPE html>
<!-- saved from url=(0046)http://www.cnblogs.com/dolphinX/p/3486214.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>JavaScript 正则表达式上——基本语法 - Samaritans - 博客园</title>
<link type="text/css" rel="stylesheet" href="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/bundle-BlueSky.css">
<link type="text/css" rel="stylesheet" href="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/101421.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/dolphinX/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/dolphinX/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/dolphinX/wlwmanifest.xml">
<script type="text/javascript" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/encoder.js"></script><script src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'dolphinX', cb_enable_mathjax=false;</script>
<script src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/dolphinX/"><img id="blogLogo" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/dolphinX/">Samaritan</a></h1>
<h2>It always seems impossible until it's done.</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
<li><a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/dolphinX/">首页</a></li>
<li></li>
<li><a id="MyLinks1_ContactLink" class="menu" rel="nofollow" href="http://msg.cnblogs.com/send/Samaritans">联系</a></li>
<li><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/dolphinX/rss">订阅</a>
<!--<a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/dolphinX/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			
<span id="stats_post_count">随笔 - 110&nbsp; </span>
<span id="stats_article_count">文章 - 0&nbsp; </span>
<span id="stats-comment_count">评论 - 1630</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/dolphinX/p/3486214.html">JavaScript 正则表达式上——基本语法</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><h3>定义</h3>
<p>JavaScript种正则表达式有两种定义方式，定义一个匹配类似<span style="background-color: #c0c0c0;"> &lt;%XXX%&gt;</span> 的字符串</p>
<p>1. 构造函数</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">var</span> reg=<span style="color: #0000ff;">new</span> RegExp('&lt;%[^%&gt;]+%&gt;','g');</pre>
</div>
<p>2. 字面量</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">var</span> reg=/&lt;%[^%&gt;]%&gt;/g;</pre>
</div>
<ul>
<li><strong>g：&nbsp;</strong>global，全文搜索，默认搜索到第一个结果接停止</li>
<li><strong>i：&nbsp;</strong>ingore case，忽略大小写，默认大小写敏感</li>
<li><strong>m：</strong>&nbsp;multiple lines，多行搜索（更改^ 和$的含义，使它们分别在任意一行对待行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配）</li>
</ul>
<h3>元字符</h3>
<p>正则表达式让人望而却步以一个重要原因就是其转义字符太多了，组合非常之多，但是正则表达式的<em>元字符</em>（<span>在正则表达式中具有特殊意义的专用字符，可以用来规定其前导字符</span>）并不多</p>
<p>元字符：<span>( [ { \ ^ $ | ) ? * + .</span></p>
<p>并不是每个元字符都有其特定意义，在不同的组合中元字符有不同的意义，分类看一下</p>
<h3>预定义特殊字符</h3>
<table style="width: 600px;" border="2" align="left">
<tbody>
<tr>
<td><span style="font-size: 14px;"><strong>字符</strong></span></td>
<td><span style="font-size: 14px;"><strong>含义</strong></span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\t</span></td>
<td><span style="font-size: 14px;">水平制表符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\r</span></td>
<td><span style="font-size: 14px;">回车符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\n</span></td>
<td><span style="font-size: 14px;">换行符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\f</span></td>
<td><span style="font-size: 14px;">换页符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\c<strong>X</strong></span></td>
<td><span style="font-size: 14px;">与X对应的控制字符(Ctrl+X)</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\v</span></td>
<td><span style="font-size: 14px;">垂直制表符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\0</span></td>
<td><span style="font-size: 14px;">空字符</span></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>字符类</h3>
<p>一般情况下正则表达式一个字符（转义字符算一个）对应字符串一个字符，表达式<span style="background-color: #c0c0c0;"> ab\t</span> 的含义是</p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22170925-c407955edac64a3c866bf516eb99de14.png" alt=""></p>
<p>但是我们可以使用元字符[]来构建一个简单的类，所谓类是指，符合某些特征的对象，是一个泛指，而不是特指某个字符了，我们可以使用表达式 [abc] 把字符a或b或c归为一类，表达式可以匹配这类的字符</p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22171404-eb03cac8e56f4e54a5ddfb2a6ca590cd.png" alt=""></p>
<p>元字符<strong>[]组合可以创建一个类</strong>，我们还可以使用<strong>元字符^创建反向类/负向类，</strong>反向类的意思是不属于XXX类的内容，表达式 <span style="background-color: #c0c0c0;">[^abc]</span> 表示不是字符a或b或c的内容</p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22171749-8e1e82acb09d4570a741b0ff4803579b.png" alt=""></p>
<h3>范围类</h3>
<p>按照上面的说明要是我们希望匹配单个数字那么表达式是这样的</p>
<p><span style="background-color: #c0c0c0;">[0123456789]</span></p>
<p>如果是字母那么。。。，好麻烦，正则表达式还提供了范围类，我们可以使用 x-y来连接两个字符表示从x到y的任意字符，这是个闭区间，也就是说包含x和ybenshen，这样匹配小写字母就很简单了</p>
<p><span style="background-color: #c0c0c0;">[a-z]</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22172809-4e611fbc512a4569a87ee934931a569a.png" alt=""></p>
<p>要是想匹配所有字母呢？在[]组成的类内部是可以连写的，我们还可以这样写&nbsp;<span style="background-color: #c0c0c0;">[a-zA-Z]</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22173032-31642481efd44312886806a4c8e51e76.png" alt=""></p>
<h3>预定义类</h3>
<p>刚才使用正则我们创建了几个类，来表示数字，字母等，但这样写也很是麻烦，正则表达式为我们提供了几个常用的预定义类来匹配常见的字符</p>
<table style="width: 600px;" border="2" align="left">
<tbody>
<tr>
<td><span style="font-size: 14px;">字符</span></td>
<td><span style="font-size: 14px;">等价类</span></td>
<td><span style="font-size: 14px;">含义</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">.</span></td>
<td><span style="font-size: 14px;">[^\n\r]</span></td>
<td><span style="font-size: 14px;">除了回车符和换行符之外的所有字符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\d</span></td>
<td><span style="font-size: 14px;">[0-9]</span></td>
<td><span style="font-size: 14px;">数字字符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\D</span></td>
<td><span style="font-size: 14px;">[^0-9]</span></td>
<td><span style="font-size: 14px;">非数字字符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\s</span></td>
<td><span style="font-size: 14px;">[ \t\n\x0B\f\r]</span></td>
<td><span style="font-size: 14px;">空白符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\S</span></td>
<td><span style="font-size: 14px;">[^ \t\n\x0B\f\r]</span></td>
<td><span style="font-size: 14px;">非空白符</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\w</span></td>
<td><span style="font-size: 14px;">[a-zA-Z_0-9]</span></td>
<td><span style="font-size: 14px;">单词字符（字母、数字、下划线）</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">\W</span></td>
<td><span style="font-size: 14px;">[^a-zA-Z_0-9]</span></td>
<td><span style="font-size: 14px;">非单词字符</span></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>有了这些预定义类，写一些正则就很方便了，比如我们希望匹配一个 ab+数字+任意字符 的字符串，就可以这样写了 <span style="background-color: #888888;">ab\d.</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22174429-6636dc941e194ce6b2037313b159e58b.png" alt="">&nbsp;</p>
<h3>边界</h3>
<p>正则表达式还提供了几个常用的边界匹配字符</p>
<div style="width: 100%;">
<table style="width: 600px;" border="2" align="left">
<tbody>
<tr>
<td>
<p><span style="font-size: 14px;">字符</span></p>
</td>
<td>
<p><span style="font-size: 14px;">含义</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-size: 14px;">^</span></p>
</td>
<td>
<p><span style="font-size: 14px;">以xx开头</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-size: 14px;">$</span></p>
</td>
<td>
<p><span style="font-size: 14px;">以xx结尾</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-size: 14px;">\b</span></p>
</td>
<td>
<p><span style="font-size: 14px;">单词边界，指[a-zA-Z_0-9]之外的字符</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-size: 14px;">\B</span></p>
</td>
<td>
<p><span style="font-size: 14px;">非单词边界</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>看个不负责任的邮箱正则匹配（切勿模仿，小括号后面会讲到）&nbsp;<span style="background-color: #888888;">\w+@\w+\.(com)$</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22184716-639dc46360ce4f27b6df4f0a9257a73a.png" alt=""></p>
<h3>量词</h3>
<p>之前我们介绍的方法都是一一匹配的，如果我们希望匹配一个连续出现20次数字的字符串难道我们需要写成这样</p>
<p><span style="background-color: #888888;">\d\d\d\d...</span></p>
<p>为此正则表达式引入了一些量词</p>
<table style="width: 600px;" border="2" align="left">
<tbody>
<tr>
<td><span style="font-size: 14px;">字符</span></td>
<td><span style="font-size: 14px;">含义</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">?</span></td>
<td><span style="font-size: 14px;">出现零次或一次（最多出现一次）</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">+</span></td>
<td><span style="font-size: 14px;">出现一次或多次（至少出现一次）</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">*</span></td>
<td><span style="font-size: 14px;">出现零次或多次（任意次）</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">{n}</span></td>
<td><span style="font-size: 14px;">出现n次</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">{n,m}</span></td>
<td><span style="font-size: 14px;">出现n到m次</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">{n,}</span></td>
<td><span style="font-size: 14px;">至少出现n次</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">&nbsp;</span></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>看几个使用量词的例子</p>
<p><span style="background-color: #888888;">\w+\b Byron</span> 匹配 单词＋边界＋Byron</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>(/\w+\b Byron/).test('Hi Byron'); //true
<span style="color: #000000;">
(</span>/\w+\b Byron/).test('Welcome Byron'); //true
<span style="color: #000000;">
(</span>/\w+\b Byron/).test('HiByron'); //false</pre>
</div>
<p>&nbsp;<span style="background-color: #888888;">\d+\.\d{1,3}</span> 匹配三位小数的数字</p>
<p><img style="border: 3px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22180101-fcffa3e319314165aacf09acf95f51a4.png" alt=""></p>
<h3>&nbsp;贪婪模式与非贪婪模式</h3>
<p>看了上面介绍的量词，也许爱思考的同学会想到关于匹配原则的一些问题，比如{3,5}这个量词，要是在句子种出现了十次，那么他是每次匹配三个还是五个，反正3、4、5都满足3～5的条件，量词在默认下是尽可能多的匹配的，也就是大家常说的贪婪模式</p>
<div class="cnblogs_code">
<pre>'123456789'.match(/\d{3,5}/g); <span style="color: #008000;">//</span><span style="color: #008000;">["12345", "6789"] </span></pre>
</div>
<p>&nbsp;既然有贪婪模式，那么肯定会有非贪婪模式，让正则表达式尽可能少的匹配，也就是说一旦成功匹配不不再继续尝试，做法很简单，在量词后加上 ? 即可</p>
<div class="cnblogs_code">
<pre>'123456789'.match(/\d{3,5}?/g); <span style="color: #008000;">//</span><span style="color: #008000;">["123", "456", "789"]</span></pre>
</div>
<h3>&nbsp;分组</h3>
<p>有时候我们希望使用量词的时候匹配多个字符，而不是像上面例子只是匹配一个，比如希望匹配Byron出现20次的字符串，我们如果写成&nbsp;<span style="background-color: #888888;">Byron{20}</span> 的话匹配的是Byro＋n出现20次，怎么把Byron作为一个整体呢？使用()就可以达到次目的，我们称为分组</p>
<p><span style="background-color: #888888;">(Byron){20}</span></p>
<p>&nbsp;<img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22182142-6b1688e29b584aa28af938a079a793d0.png" alt=""></p>
<p>&nbsp;如果希望匹配Byron或Casper出现20次该怎么办呢？可以使用字符 ｜ 达到或的功效</p>
<p><span style="background-color: #888888;">(Byron|Casper){20}</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22182815-593022d45eba482aaddd936f3b24beb4.png" alt="">&nbsp;</p>
<p>&nbsp;我们看到图中有个＃1的东东，那是什么？使用分组的正则表达式会把匹配项也放到分组中，默认就是按数字编号分发的，各异根据编号获得捕获的分组内容，这个在一些希望具体操作第几个匹配项的函数中很有用</p>
<p><span style="background-color: #888888;">(Byron).(ok)</span></p>
<p>&nbsp;<img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22183347-1db4325c096a43f3a5796b7d25c74b77.png" alt=""></p>
<p>如果有分组嵌套的情况，外面的组的编号靠前</p>
<p><span style="background-color: #888888;">((^|%&gt;)[^\t]*)</span></p>
<p>&nbsp;<img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/23222603-20a2c64f182a4b49b05a83ef6a3d414d.png" alt=""></p>
<p>有时候我们不希望捕获某些分组，只需要在分组内加上 ?: 就可以了，着并不意味着该分组内容不属于正则表达式，只是不会给这个分组加编号了而已</p>
<p><span style="background-color: #888888;">(?:Byron).(ok)</span></p>
<p>&nbsp;<img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22183600-8865bffe0f1e48e3829aad75461f9bc8.png" alt=""></p>
<p>&nbsp;其实在C#等语言中分组还可以起名字，不过JavaScript不支持</p>
<h3>前瞻</h3>
<div>
<table style="height: 95px; width: 504px;" border="2" align="left">
<tbody>
<tr>
<td><span style="font-size: 14px;">表达式</span></td>
<td><span style="font-size: 14px;">含义</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">exp1(?=exp2)</span></td>
<td><span style="font-size: 14px;">匹配后面是exp2的exp1</span></td>
</tr>
<tr>
<td><span style="font-size: 14px;">exp1(?!exp2)</span></td>
<td><span style="font-size: 14px;">匹配后面不是exp2的exp1</span></td>
</tr>
</tbody>
</table>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>说的有些抽象，看个例子&nbsp;<span style="background-color: #888888;">good(?=Byron)</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22191434-fc2c05f77d2b4002a91032e44e49815c.png" alt=""></p>
<div class="cnblogs_code">
<pre>(/good(?=Byron)/).exec('goodByron123'); <span style="color: #008000;">//</span><span style="color: #008000;">['good']</span>
(/good(?=Byron)/).exec('goodCasper123'); <span style="color: #008000;">//</span><span style="color: #008000;">null</span>
(/bad(?=Byron)/).exec('goodCasper123');<span style="color: #008000;">//</span><span style="color: #008000;">null</span></pre>
</div>
<p>通过上面例子可以看出 exp1(?=exp2) 表达式会匹配exp1表达式，但只有其后面内容是exp2的时候才会匹配，也就是两个条件，exp1(?!exp2) 比较类似</p>
<p><span style="background-color: #888888;">good(?!Byron)</span></p>
<p><img style="border: 2px solid black;" src="./JavaScript 正则表达式上——基本语法 - Samaritans - 博客园_files/22191951-c13dc0c8696a4021a016496b556e3545.png" alt=""></p>
<div class="cnblogs_code">
<pre>(/good(?!Byron)/).exec('goodByron123'); <span style="color: #008000;">//</span><span style="color: #008000;">null</span>
(/good(?!Byron)/).exec('goodCasper123'); <span style="color: #008000;">//</span><span style="color: #008000;">['good']</span>
(/bad(?!Byron)/).exec('goodCasper123');<span style="color: #008000;">//</span><span style="color: #008000;">null</span></pre>
</div>
<h3>参考&nbsp;</h3>
<p><a href="http://www.cnblogs.com/rubylouvre/" target="_blank">司徒正美</a> <a href="http://www.cnblogs.com/rubylouvre/archive/2010/03/09/1681222.html" target="_blank">JavaScript正则表达式</a></p>
<p><a href="http://www.regexper.com/" target="_blank">Regexper</a></p>
<p>PS:博客中的图都是用第二个链接做的，帮助人图形化理解正则表达式，真心不错</p></div><div id="MySignature"></div>
<div class="clear"></div>
</body></html>